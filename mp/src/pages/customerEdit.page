<apex:page standardController="Account" extensions="CustomersController" sidebar="false" showHeader="false">
  <apex:sectionHeader title="取引先" subtitle="一覧＆変更"/>
  <apex:form >
    <apex:pageBlock mode="edit" id="block">

      <apex:pageBlockButtons location="both">
        <apex:commandButton value="新規画面へ" action="{!URLFOR($Page.customerNew)}" id="newButton" />
        <apex:commandButton action="{!save}" value="変更を保存する"/>
        <apex:commandButton action="{!cancel}" value="キャンセル"/>
      </apex:pageBlockButtons>
      <apex:pageMessages />

      <apex:pageBlockSection >
        <apex:pageBlockSectionItem >
          <apex:outputLabel for="strName">取引先名</apex:outputLabel>
          <apex:panelGroup >
          <apex:inputText id="strName" value="{!strName}"/>
          <apex:commandButton value="検索" action="{!search}" rerender="block" status="status"/>
          </apex:panelGroup>
        </apex:pageBlockSectionItem>
      </apex:pageBlockSection>

      <apex:actionStatus id="status" startText="読み込み中…"/>
      <apex:pageBlockSection title="一覧" id="resultsBlock" columns="1">
        <apex:pageBlockTable value="{!customers}" var="item" rendered="{!NOT(ISNULL(customers))}">
          <apex:column value="{!item.Name}" headerValue="名称" width="100"/>
          <apex:column headerValue="電話番号" width="200">
            <apex:inputField value="{!item.phone}"/>
          </apex:column>
        </apex:pageBlockTable>
      </apex:pageBlockSection>
    </apex:pageBlock>
  </apex:form>
</apex:page>